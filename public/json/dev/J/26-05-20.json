{"url":"/dev/J/26-05-20","markdown":"## [/](/) [dev/](/dev/) [J/](/dev/J/)\n# 26/05/20\n[hier](23-05-20) / [demain](27-05-20)\n\nj'ai remarqué  qu'il y avait un problème, sans doute dans l'enregistrement des fichiers, après avoir redemarré le serveur il y a des coquilles, le texte markdown est bon, mais pas l'html, souvent c'est le dernier caractere écrit qui ne se sauvegarde pas, il faudrait que je fasse un système de sauvegarde moins violent, (ex : toutes les 10 secondes) et surtout avec vérification et indication de l'\"état\" (ex : leger fond rouge/vert sur text area si bien sauvegardé)\n\npistes :\n  * lors de l'envoit? le POST se ferrait avant que l'html soit bien généré ? ça me semble bizarre car markedjs et dompurify sont synchrones ??\n\nj'ai vraiment une flemme de ouf de bosser, l'appart est un squat général, j'arrive pas à me mettre en condition, y'a des mouches, j'ai mal a la tete, le nez qui coule, je ne sais plus par quel bout attaquer cahut\n\n## Oui, bon :\n\nj'ai bu pas mal (suffisement?) de [café](/café) aujourd'hui et là une nouvelle tasse, j'ai l'impression de retrouver mes esprits, ce que je dois faire me semble assez clair, hélas il est déjà 18h et demain je vais à toulouse pour quelques jours et ça sera plus difficile de bosser, \n\nmais disons-nous que ça n'est pas une raison, je vais sur dev.arthur.cahut.net, allez, zou\n\nce qu'il faut que j'y fasse :\n\n1. annuler la tentative de mettre une div-contentEditable (revenir à master sur la branche dev) -check\n2. je viens de reflechir à mon code et à d'où pouvait venir le soucis dont je parle plus haut :\n    à mon avis ça vient de la fonction d'écriture dans le fichier, elle est executé en réponse d'un POST, mais vu qu'on en envoit plein, il est super possible qu'ils arrivent pas forcement dans le bon ordre et qu'un précédent ecrase le suivant. En tout cas, y'a clairement plusieurs fonctions qui travaillent en même temps sur le même fichier, et ça c'est pas bon du tout \n\n","html":"<h2 id=\"-dev-j\"><a href=\"/\">/</a> <a href=\"/dev/\">dev/</a> <a href=\"/dev/J/\">J/</a></h2>\n<h1 id=\"260520\">26/05/20</h1>\n<p><a href=\"23-05-20\">hier</a> / <a href=\"27-05-20\">demain</a></p>\n<p>j'ai remarqué  qu'il y avait un problème, sans doute dans l'enregistrement des fichiers, après avoir redemarré le serveur il y a des coquilles, le texte markdown est bon, mais pas l'html, souvent c'est le dernier caractere écrit qui ne se sauvegarde pas, il faudrait que je fasse un système de sauvegarde moins violent, (ex : toutes les 10 secondes) et surtout avec vérification et indication de l'\"état\" (ex : leger fond rouge/vert sur text area si bien sauvegardé)</p>\n<p>pistes :</p>\n<ul>\n<li>lors de l'envoit? le POST se ferrait avant que l'html soit bien généré ? ça me semble bizarre car markedjs et dompurify sont synchrones ??</li>\n</ul>\n<p>j'ai vraiment une flemme de ouf de bosser, l'appart est un squat général, j'arrive pas à me mettre en condition, y'a des mouches, j'ai mal a la tete, le nez qui coule, je ne sais plus par quel bout attaquer cahut</p>\n<h2 id=\"oui-bon-\">Oui, bon :</h2>\n<p>j'ai bu pas mal (suffisement?) de <a href=\"/caf%C3%A9\">café</a> aujourd'hui et là une nouvelle tasse, j'ai l'impression de retrouver mes esprits, ce que je dois faire me semble assez clair, hélas il est déjà 18h et demain je vais à toulouse pour quelques jours et ça sera plus difficile de bosser, </p>\n<p>mais disons-nous que ça n'est pas une raison, je vais sur dev.arthur.cahut.net, allez, zou</p>\n<p>ce qu'il faut que j'y fasse :</p>\n<ol>\n<li>annuler la tentative de mettre une div-contentEditable (revenir à master sur la branche dev) -check</li>\n<li>je viens de reflechir à mon code et à d'où pouvait venir le soucis dont je parle plus haut :\n&nbsp;&nbsp;&nbsp;&nbsp;à mon avis ça vient de la fonction d'écriture dans le fichier, elle est executé en réponse d'un POST, mais vu qu'on en envoit plein, il est super possible qu'ils arrivent pas forcement dans le bon ordre et qu'un précédent ecrase le suivant. En tout cas, y'a clairement plusieurs fonctions qui travaillent en même temps sur le même fichier, et ça c'est pas bon du tout </li>\n</ol>\n","nothing":1}
